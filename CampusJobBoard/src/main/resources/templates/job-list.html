<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Job List</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script th:src="@{/js/delete-confirm.js}" defer></script>
</head>
<body>
<div th:replace="header :: header"></div>
<header>
    <div class="container mt-4">
        <nav class="nav">
            <a th:href="@{/job}"
               class="nav-link">
                Job Postings
            </a>
            <a th:href="@{/job/job-applications}"
               class="nav-link"
            >
                Job Applications
            </a>
        </nav>
    </div>

</header>
<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0 fw-semibold">All Jobs Posted</h5>
            <span class="badge bg-secondary" th:text="'Total: ' + ${jobs != null ? jobs.size() : 0}">Total: 0</span>
        </div>
        <div class="card-footer text-end">
            <a th:href="@{/job/new}" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Create New Job
            </a>
        </div>
    </div>
    <br/>
    <div th:each="job : ${jobs}" class="border p-4 mb-4 shadow-sm rounded">
        <h2 th:text="${job.title}"></h2>
        <p>Description:</p>
        <p th:text="${job.description}"></p>
        <p>Salary: <span><strong th:text="${job.salary}"></strong></span></p>
        <p>Location: <span th:text="${job.location}"></span></p>
        <p>Category: <span th:text="${job.category}"></span></p>
        <strong>Deadline: <span  th:text="${job.deadline}"></span></strong>
        <div class="border p-4 ">
            <h3>Status</h3>
            <strong th:text="${job.status}"></strong>
        </div>
        <div class="card-footer text-end">

            <a th:href="'/job/edit/' + ${job.jobId}" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Update
            </a>
            <!-- Delete with confirmation first -->
            <a th:href="'/job/delete/' + ${job.jobId}"
               class="btn btn-primary"
               th:data-title="${job.title}"
               onclick="return handleDeleteClick(event, this.getAttribute('data-title'))">
                <i class="bi bi-plus-circle"></i> Delete
            </a>



        </div>
    </div>


</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
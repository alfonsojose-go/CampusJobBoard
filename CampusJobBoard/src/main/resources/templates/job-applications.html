<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Job Applications</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
<header>
    <div class="container mt-4">
        <nav class="nav">
            <a th:href="@{/job}"
               class="nav-link">
                Job Postings
            </a>
            <a th:href="@{/job/job-applications}"
               class="nav-link"
            >
                Job Applications
            </a>
        </nav>
    </div>

</header>
<div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0 fw-semibold">All Job Applications</h5>
        <span class="badge bg-secondary" th:text="'Total: ' + ${jobApplications != null ? jobApplications.size() : 0}">Total: 0</span>
    </div>
    <table class="table table-striped table-hover align-middle mb-0">
        <thead class="table-light">
        <tr>
            <th>Applicant</th>
            <th>Title</th>
            <th>Location</th>
            <th>Salary</th>
            <th>Category</th>
            <th>Deadline</th>
            <th>Status</th>
            <th class="text-end">Actions</th>
        </tr>
        </thead>

        <tbody>

        <!-- DATA ROWS -->
        <tr th:each="jobApplication : ${jobApplications}">
            <!-- Title + Description -->
            <td>
                <strong>Applied by:</strong>
                <!-- Full Name (if available) -->
                <span th:text="${jobApplication.student.fullName}"></span>
                <div class="text-muted small"
                     th:text="${jobApplication.student.email}">
                </div>
            </td>
            <!-- Title + Description -->
            <td>
                <strong th:text="${jobApplication.job.title}"></strong>
                <div class="text-muted small"
                     th:text="${jobApplication.job.description}">
                </div>
            </td>

            <!-- Location -->
            <td>
                            <span class="badge text-bg-info"
                                  th:text="${jobApplication.job.location}">
                            </span>
            </td>

            <!-- Salary -->
            <td>
                <span th:text="${jobApplication.job.salary}"></span>
            </td>

            <!-- Category -->
            <td>
                <div th:text="${jobApplication.job.category}"></div>
            </td>

            <!-- Deadline -->
            <td>
                <div th:text="${jobApplication.job.deadline}"></div>
            </td>

            <!-- Status -->
            <td>
                <div th:text="${jobApplication.status}"></div>
            </td>

            <!-- ACTION BUTTONS -->
            <td class="text-end">
                <a th:href="@{'/job/accept/' + ${jobApplication.applicationId}}"
                   class="btn btn-sm btn-outline-secondary"
                   onclick="return confirm('Are you sure you want to accept this job application?');">
                    Accept
                </a>

                <a th:href="@{'/job/reject/' + ${jobApplication.applicationId}}"
                   class="btn btn-sm btn-outline-danger ms-1"
                   onclick="return confirm('Are you sure you want to reject this job application?');">
                    Reject
                </a>
            </td>
        </tr>

        </tbody>
    </table>
</div>
<br/>


</div>
</body>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Job Details</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="bg-light">

<div class="container mt-5">

    <!-- Return to Dashboard -->
    <a href="/student/dashboard" class="btn btn-outline-secondary mb-3">← Return to Dashboard</a>

    <!-- Back to Jobs -->
    <a href="/student/jobs" class="btn btn-secondary mb-3 ms-2">← Back to Jobs</a>

    <div class="card shadow">
        <div class="card-body">

            <h2 class="card-title" th:text="${job.title}">Job Title</h2>

            <h5 class="text-muted mb-3">
                Employer: <span th:text="${job.employer.fullName}">Employer</span>
            </h5>


            <p class="card-text" th:text="${job.description}">
                Job description goes here.
            </p>

            <p><strong>Location:</strong> <span th:text="${job.location}"></span></p>
            <p><strong>Salary:</strong> <span th:text="${job.salary}"></span></p>

            <!-- APPLY BUTTON -->
            <form th:action="@{'/student/jobs/' + ${job.jobId} + '/apply'}"
                  method="post">
                <button type="submit" class="btn btn-success">
                    Apply for this Job
                </button>
            </form>

            <!-- If NOT applied -->
            <form th:if="${!alreadyApplied}"
                  th:action="@{'/student/jobs/' + ${job.jobId} + '/apply'}"
                  method="post">

                <button type="submit" class="btn btn-success">
                    Apply for this Job
                </button>
            </form>

            <!-- If already applied -->
            <button th:if="${alreadyApplied}"
                    class="btn btn-secondary"
                    disabled>
                You have already applied
            </button>

        </div>
    </div>

</div>

</body>
</html>
